---
title: "p8105_hw3_fwt2107"
author: "Felix Tran"
date: "October 4, 2018"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggridges)
```

# Problem 1

## Data cleaning
This block of code loads and cleans the BRFSS data:

1. Load the BRFSS data from the p8105.datasets package

2. Clean the variable names

3. Only keep the observations related to the Overall Health topic

4. Remove unneeded variables

5. Transform **response** into a factor with the values ordered
from "Excellent" to "Poor"

6. Separate **locationdesc** into 2 variables (**state** and **location**) for 
the state and site for each observation

7. Remove the redundant **locationabbr** variable
```{r}
library(p8105.datasets)
brfss_df <- brfss_smart2010 %>% 
  janitor::clean_names() %>%
  filter(topic == "Overall Health") %>%
  select(-class, -topic,  -question, -sample_size,
          -c(confidence_limit_low:geo_location)) %>%
  mutate(response = forcats::fct_relevel(response, "Excellent", "Very good",
                                         "Good", "Fair", "Poor")) %>% 
  separate(locationdesc, into = c('state', 'location'), sep = ' - ') %>%
  select(-locationabbr)

brfss_df
```

## Answering questions about the data
### States observed at 7 locations in 2002
3 states were observed at 7 locations in 2002: Connecticut, Florida, and 
North Carolina.

Using the brfss_df dataset:

1. Filter observations to only look at observations from 2002

2. Group by **state**

3. Count the number of unique **location** values and only see the states with 7
location sites
```{r}
brfss_df %>% 
  filter(year == '2002') %>% 
  group_by(state) %>%
  summarize(num_sites = length(unique(location))) %>% 
  filter(num_sites == 7)
```


### Spaghetti plot
